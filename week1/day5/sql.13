제약조건으로 테이블을 견고하게

테이블을 만들 때는 테이블의 구조에 필요한 제약조건을 설정해줘야 한다. 제약조건에는 대표적으로 기본 키와 외래 키, 고유 키, default 값, NOT NILL 등이 있다.

- 제약조건의 기본 개념과 종류
    * 제약조건(constrint) : 데이터의 무결성을 지키기 위해 제한하는 조건이다. 데이터의 무결성이란, 데이 터의 결함이 없음을 의미한다.
    * PRIMARY KEY, FOREIGN KEY, UNIQUE, CHECK, DEFAULT, NULL

- 기본 키 제약조건
    * 기본 키(Primary Key): 데이터를 구분할 수 있는 식별자
    * 기본 키에 입력되는 값은 중복될 수 없으며, NULL 값이 입력될 수 없다.
    * 대부분의 테이블은 기본 키를 가져야 한다. 기본 키가 없어도 테이블 구성이 가능하지만 실무에서 사용하는 테이블에는 기본 키를 설정해야 중복된 데이터가 입력되지 않는다.
    * CREATE TABLE에서 설정하는 기본 키 제약조건은 열 이름 뒤에 PRIMARY KEY를 붙여주면 기본 키로 설정된다.
    * ALTER TABLE에서 설정하는 기본 키 제약조건은 테이블 수정하고 제약조건을 추가한다.

- 외래 키 제약조건
    * 외래 키(Foreign Key) : 두 테이블 사이의 관계를 연결해주고, 그 결과 데이터의 무결성을 보장해주는 역할을 한다. 외래 키가 설정된 열은 꼭 다른 테이블의 기본 키와 연결된다.
    * 기준 테이블: 기본 키가 있는 테이블, 참조 테이블: 외래 키가 있는 테이블
    * 참조 테이블이 참조하는 기준 테이블의 열은 반드시 기본 키나 고유 키로 설정되어 있어야 한다.
    * CREATE TABLE에서 설정하는 외래 키 제약조건은 CREATE TABLE 끝에 FOREIGN KEY 키워드를 설정한다. FOREIGN KEY(열_이름) REFERENCES 기준_테이블(열_이름)
    * ALTER TABLE에서 설정하는 외래 키 제약조건은 테이블을 수정하고 제약조건을 추가한다.

- 기타 제약조건
    * 고유 키(Unique) 제약조건: 중복되지 않는 유일한 값을 입력해야 하는 조건이다. 기본 키 제약조건 과 거의 비슷하지만, 차이점은 고유 키 제약조건은 NULL 값을 허용한다는 것이다.
    * 체크(Check) 제약조건: 입력되는 데이터를 점검하는 기능을 한다. 열의 정의 뒤에 CHECK(조건)을 추가해주면 된다.
    * 기본값(Default) 정의: 값을 입력하지 않았을 때 자동으로 입력될 값을 미리 지정해 놓는 방법이다. 기본값이 설정된 열에 기본값을 입력하려면 default라고 써주고, 원하는 값을 입력하려면 해당 값을 써 주면 된다.
    * 널 값 허용: 널 값을 허용하려면 생략하거나 NULL을 사용하고, 허용하지 않으려면 NOT NULL을 사 용한다. PRIMARY KEY가 설정된 열에는 NULL 값이 있을 수 없으므로 생략하면 자동으로 NOT NULL 인식한다.

- 용어 정리

제약조건                   데이터의 무결성을 지키기 위한 제한된 조건   
ALTER TABLE              이미 만들어진 테이블을 수정하는 SQL 문
ADD CONSTRAINT           제약조건을 추가하는 SQL 문
기준 테이블                 기본 키-외래 키 관계가 맺어진 테이블 중 기본 키가 설정된 테이블
참조 테이블                 기본 키-외래 키 관계가 맺어진 테이블 중 외래 키가 설정된 테이블
ON UPDATE CASCADE        기준 테이블의 기본 키를 변경하면 참조 테이블의 외래 키도 변경되는 기능
ON DELETE CASCADE        기준 테이블의 기본 키를 삭제하면 참조 테이블의 외래 키도 삭제되는 기능

